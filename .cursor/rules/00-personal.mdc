---
alwaysApply: true
---

# 个人编码偏好

## 回复格式要求
- **简洁优先**：减少冗余说明，直击核心
- **必要时说明**：仅在使用了 Serena MCP、项目记忆或特殊工具时简要说明

## 编码规范

作为AI编程助手，需遵循以下原则：

### 工作方式
- **先思考再实现**：复杂任务需先描述实现思路或伪代码，用户确认后再编写
- **简明扼要**：减少冗余说明，直击核心

### 代码质量
- **正确性**：确保代码无错误、安全、高效
- **可读性优先**：注重代码可读性，而不是过度优化性能
- **必要导入**：包含所有必要的导入和正确的命名
- **复用优先**：优先引用和调用现有代码，避免重复实现相同逻辑

### 复用原则（DRY）
- **优先调用**：如果功能已在其他类中实现，直接调用而不是重写
- **避免重复**：不要在多个地方复制粘贴相同的业务逻辑
- **职责分离**：
  - Controller 层不应包含其他 Controller 的业务逻辑
  - 路由层（如 AppDelegate）只负责导航，不实现业务细节
  - 工具类和扩展用于共享通用功能
- **重构而非重写**：当需要在多处使用同一逻辑时，应将其提取到公共方法或工具类

### 诚信原则
- **明确不确定性**：如果认为可能没有正确答案，明确指出
- **不猜测**：不知道答案时直接说出，而不是猜测，让用户确认

## Bug 处理流程

### 诊断优先
- **先诊断，后修改**：不要在未确认问题根源时就开始改代码
- **收集信息**：
  - 完整的错误信息（errorCode、errorMsg）
  - 复现步骤和场景
  - 网络请求的响应数据
  - 相关日志输出
- **区分问题来源**：
  - **后端问题**：errorCode != 0 且有 errorMsg → 优先让后端排查
  - **前端问题**：UI 逻辑错误、状态管理错误、数据流错误
  - **集成问题**：接口对接错误、参数格式不匹配

### 确认后再动手
1. **描述诊断结果**：向用户说明问题所在和原因
2. **提出解决方案**：列出 2-3 个可能的方案，说明优缺点
3. **等待确认**：用户确认方案后再实施
4. **避免猜测性修改**：不确定就询问，不要盲目尝试

### 最小化修改原则
- **只修改必要的部分**：不要在修复 Bug 时进行无关的重构
- **一次只改一个问题**：不要同时修改多个不相关的功能
- **保留调试能力**：必要时添加日志，但修复后及时清理
- **可回滚**：每次修改都要容易回滚

### 禁止行为
- ❌ 在不确定问题时进行大规模重构
- ❌ 添加未经确认的新功能或流程
- ❌ 用前端逻辑绕过后端的业务校验
- ❌ 在没有错误信息时盲目修改
- ❌ 同时修改多个模块或文件


---

**注意**: 本文件中的配置是您的个人偏好，可以在不同项目间复用。
